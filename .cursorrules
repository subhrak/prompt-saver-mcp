# Cursor Rules for Prompt Saver Workflow

## Prompt Saver Natural Language Commands

When the user says any of these phrases:
- "generate prompt preview" / "create prompt preview" / "preview prompt"
- "generate a prompt from our conversation"
- "save this conversation as a prompt"
- "create a prompt template from what we did"
- "make a prompt from our chat"

Do this:
1. Format our entire conversation as a JSON array with "role" and "content" fields
2. Extract a brief task description from the conversation (first user message or overall theme)
3. Run this command (use absolute path or ensure you're in the prompt-saver-mcp directory):
   ```bash
   python /Users/subhra.kundu/Desktop/MCP\ Repo/prompt-saver-mcp/scripts/cursor_prompt_helper.py preview --conversation '[FORMATTED_JSON]' --task '[TASK_DESCRIPTION]'
   ```
   Or if in the project directory:
   ```bash
   python scripts/cursor_prompt_helper.py preview --conversation '[FORMATTED_JSON]' --task '[TASK_DESCRIPTION]'
   ```
4. Display the preview output in a readable format
5. Tell the user: "Review the preview above. You can say 'save it' to save, or tell me what to change."

---

When the user says any of these phrases:
- "save it" / "save" / "allow" / "approve" / "yes save"
- "save the prompt" / "save this prompt"
- "go ahead and save"

Do this:
1. Check if there's a preview (run: `python scripts/cursor_prompt_helper.py show` or use absolute path)
2. If preview exists, run:
   ```bash
   python scripts/cursor_prompt_helper.py save --context '[ANY_CONTEXT_USER_MENTIONED]'
   ```
   (Use absolute path if needed: `/Users/subhra.kundu/Desktop/MCP\ Repo/prompt-saver-mcp/scripts/cursor_prompt_helper.py`)
3. Show the confirmation message to the user
4. If no preview exists, tell user: "No preview found. Generate a preview first by saying 'generate prompt preview'."

---

When the user wants to edit the preview, says things like:
- "make it more specific about [topic]"
- "change category to [category]"
- "add details about [something]"
- "update the summary to mention [thing]"
- "make the template include [requirement]"
- "regenerate with [feedback]"

Do this:
1. Extract the feedback/change request from the user's message
2. Run:
   ```bash
   python scripts/cursor_prompt_helper.py regenerate --feedback '[USER_FEEDBACK]'
   ```
   (Use absolute path if needed: `/Users/subhra.kundu/Desktop/MCP\ Repo/prompt-saver-mcp/scripts/cursor_prompt_helper.py`)
3. Show the updated preview
4. Ask: "Review the updated preview. Say 'save it' when ready, or tell me what else to change."

---

When the user says:
- "don't save" / "cancel" / "skip it" / "not this time"

Do this:
1. Acknowledge: "Okay, prompt not saved. Preview cleared."
2. Optionally clear the preview file (or just leave it for later)

---

## Context Handling

When the user mentions context (branch, PR, etc.) while generating preview or saving:
- Extract branch names, PR numbers, or other context
- Include them in the --context parameter when saving
- Example: If user says "we're on branch feature/api-client, PR #123", use: `--context "Branch: feature/api-client, PR: #123"`

---

## Best Practices

1. Always format conversations as clean JSON before calling the script
2. Extract meaningful task descriptions from the conversation
3. Show previews in a readable, formatted way
4. Confirm actions clearly ("✅ Prompt saved!" or "Preview generated!")
5. If there are errors, show helpful error messages

---

## Example Workflow

User: "Generate a prompt preview from our conversation"
You: 
1. Format conversation as JSON
2. Run preview command
3. Show preview
4. Say: "Preview generated! Review it above. Say 'save it' to save, or tell me what to change."

User: "Make it more specific about error handling"
You:
1. Run regenerate with feedback
2. Show updated preview
3. Say: "Updated! Review the changes. Say 'save it' when ready."

User: "Save it"
You:
1. Run save command
2. Show confirmation: "✅ Prompt saved! ID: [id]"

---

## Search Commands

When the user says any of these phrases:
- "search my prompts for [query]"
- "find prompts about [topic]"
- "search for prompts related to [topic]"
- "look for saved prompts about [query]"
- "do I have any prompts for [task]"
- "search prompts about [topic]"

Do this:
1. Extract the search query from the user's message
2. Run:
   ```bash
   python scripts/prompt_helper.py search "[SEARCH_QUERY]"
   ```
   (Use absolute path if needed: `/Users/subhra.kundu/Desktop/MCP\ Repo/prompt-saver-mcp/scripts/prompt_helper.py`)
3. Display the search results showing:
   - Number of prompts found
   - Prompt IDs
   - Use case categories
   - Summaries
   - Similarity scores
4. Tell the user: "Found [X] matching prompts. Say 'show details for [prompt_id]' to view the full template, or tell me which one you want to use."

---

## Get Prompt Details Commands

When the user says:
- "show details for [prompt_id]"
- "get prompt details [prompt_id]"
- "show me prompt [prompt_id]"
- "view prompt [prompt_id]"
- "show me the full template for [prompt_id]"

Do this:
1. Extract the prompt ID from the user's message
2. Run:
   ```bash
   python scripts/prompt_helper.py details [PROMPT_ID]
   ```
   (Use absolute path if needed: `/Users/subhra.kundu/Desktop/MCP\ Repo/prompt-saver-mcp/scripts/prompt_helper.py`)
3. Display the full prompt details including:
   - Prompt ID and metadata
   - Full summary
   - Complete history
   - Entire prompt template with all sections
4. Ask the user: "Would you like me to help you adapt this template for your current task?"

---

## Search by Use Case Commands

When the user says:
- "show me all [use-case] prompts"
- "list my [use-case] prompts"
- "what [use-case] prompts do I have"

Where [use-case] is one of: code-gen, text-gen, data-analysis, creative, general

Do this:
1. Extract the use case from the user's message
2. Run:
   ```bash
   python scripts/prompt_helper.py use-case [USE_CASE]
   ```
3. Display the results grouped by use case

